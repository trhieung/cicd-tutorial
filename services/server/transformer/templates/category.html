{% extends './index.html' %}
{% load static %}

{% block generate_preview %}
<div class="content-wrapper-context">
  <h3 class="img-content" id="categoryTitle">
    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 252.15 252.15" xml:space="preserve" fill="#000000">
      <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
      <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
      <g id="SVGRepo_iconCarrier">
        <g>
          <g>
            <path style="fill:#030104;"
              d="M94.911,147.483c-4.254,0-7.91,2.214-10.955,6.619c-3.045,4.418-4.564,9.76-4.564,16.027 c0,6.274,1.519,11.621,4.564,16.048c3.044,4.419,6.7,6.632,10.955,6.632s7.918-2.213,10.956-6.632 c3.045-4.427,4.584-9.773,4.584-16.048c0-6.268-1.539-11.609-4.584-16.027C102.829,149.697,99.166,147.483,94.911,147.483z">
            </path>
            <polygon style="fill:#030104;" points="207.049,249.421 207.048,249.421 207.049,249.422 "></polygon>
            <path style="fill:#030104;"
              d="M118.952,194.536c-1.422,0-2.859,1.201-4.323,3.601c-1.484,2.411-2.213,4.817-2.213,7.216 c0,1.533,0.351,2.791,1.065,3.814c1.224,1.636,3.101,2.454,5.636,2.454c3.855,0,5.78-1.821,5.78-5.498 c0-2.413-0.64-4.941-1.911-7.602C121.722,195.854,120.382,194.536,118.952,194.536z">
            </path>
            <path style="fill:#030104;"
              d="M141.627,147.483c-4.255,0-7.883,2.214-10.873,6.619c-2.997,4.418-4.489,9.76-4.489,16.027 c0,6.274,1.492,11.621,4.489,16.048c2.99,4.419,6.618,6.632,10.873,6.632c4.371,0,8.047-2.213,11.051-6.632 c2.976-4.427,4.481-9.773,4.481-16.048c0-6.268-1.506-11.609-4.481-16.027C149.674,149.697,145.998,147.483,141.627,147.483z">
            </path>
            <path style="fill:#030104;"
              d="M209.674,40.859l15.127-19.663L211.158,8.467l-13.635,17.278L162.066,0l-29.539,32.13 l35.883,25.437l-1.498,6.666C110.891,20.887,8.295,50.625,32.473,176.679C7.044,213.677-0.111,235.986,4.287,252.15l202.761-2.729 c-9.614-12.228-15.319-25.216-26.37-34.557c32.116-64.156,22.941-111.999-2.487-140.183l6.13-4.386 c44.646,43.031,46.453,107.964,43.202,175.483C265.592,159.126,249.207,95.992,209.674,40.859z M167.049,203.951 c-5.979,8.46-14.453,14.474-25.422,18.062v2.109c0,3.574-0.949,6.558-2.88,8.928c-1.931,2.365-4.31,3.746-7.162,4.138 c-2.729,0.255-4.811-0.329-6.233-1.739c-2.13,1.918-4.468,2.88-6.997,2.88c-2.743,0-5.237-1.017-7.465-3.065 c-1.422,1.533-3.594,2.18-6.542,1.925c-2.832-0.269-5.23-1.608-7.148-4.048c-1.924-2.413-2.894-5.443-2.894-9.018v-2.899 c-10.158-3.706-18.013-9.602-23.587-17.649c-5.588-8.076-8.379-17.484-8.379-28.247c0-2.427,0.2-4.99,0.612-7.685 c1.924-16.385,7.849-29.959,17.801-40.707c10.454-11.272,23.188-16.907,38.199-16.907c15.023,0,27.752,5.697,38.206,17.079 c9.952,10.645,15.931,24.15,17.958,40.535c0.413,2.694,0.612,5.258,0.612,7.685C175.729,186.336,172.836,195.882,167.049,203.951z ">
            </path>
          </g>
        </g>
      </g>
    </svg>
    {{ category }}
  </h3>
  <div class="content-text" id="reviewText">
    <div>Review text for label {{ category }}</div>
    <div id="reviewText_div">{{ reviewText }}</div>
  </div>
  <!-- <button class="content-button">Generate comment</button> -->
  <button id="generateCommentButton" class="content-button">Generate comment</button>
<!-- <button id="copyCommentButton" class="content-button" onclick="copyReviewText()">Copy comment</button>-->

</div>
{% endblock %}

{% block scripts %}
<script>
const h3Element = document.getElementById('categoryTitle');
const button_gen = document.getElementById('generateCommentButton');

button_gen.addEventListener('click', () => {
  // Get the content after the <svg> tag
  const svgElement = h3Element.querySelector('svg');
  const contentAfterSvg = svgElement.nextSibling.textContent.trim();
  console.log(contentAfterSvg)
  // Update the path by appending contentAfterSvg
  const newPath = "http://synguyencd.pythonanywhere.com/final_lab/index" + '/' + contentAfterSvg;

  // Change the window location to the new path
  window.location.href = newPath;
});

function copyReviewText() {
  const reviewTextElement = document.getElementById("reviewText_div"); // Select the second <div> element
  const reviewText = reviewTextElement.textContent; // Get the text content of the second <div>
  
  navigator.clipboard.writeText(reviewText) // Copy the reviewText to clipboard
    .then(() => {
      console.log("Review text copied to clipboard:", reviewText);
      alert("Review text copied to clipboard!");
    })
    .catch((error) => {
      console.error("Failed to copy review text:", error);
      alert("Failed to copy review text. Please try again.");
    });
}
</script>
{% endblock %}